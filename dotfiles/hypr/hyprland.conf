# Hyprland configuration for Arch Dots
# Optimized and conflict-free

# Monitor configuration
monitor = ,preferred,auto,1

# Default wallpaper
exec = swaybg -i /usr/share/backgrounds/archlinux/archlinux-wallpaper.jpg -m fill

# Input configuration
input {
  kb_layout = us,es
  kb_variant =
  kb_model =
  kb_options =
  kb_rules =
  
  follow_mouse = 2
  touchpad {
    natural_scroll = yes
    scroll_factor = 0.3
    tap-to-click = yes
    drag_lock = yes
  }
  
  sensitivity = 0
  accel_profile = flat
  
  # Optimizations for maximum smoothness
  repeat_rate = 50
  repeat_delay = 300
  numlock_by_default = true
  left_handed = false
  scroll_method = 2
  scroll_button = 274
}

# Device configuration
device {
  name = epic-mouse-v1
  sensitivity = -0.5
}

# XWayland configuration
xwayland {
  force_zero_scaling = true
}

# General configuration
general {
  gaps_in = 6
  gaps_out = 12
  border_size = 2
  col.active_border = rgba(33ccffff)
  col.inactive_border = rgba(595959aa)
  layout = master  # Cambiado a 'master' para control de ventana principal
  allow_tearing = false
  
  # Super fast animations
  animate_manual_resizes = true
  animate_mouse_windowdragging = true
  animate_splits = true
  animate_cursor = true
  animate_workspace_transitions = true
}

# Window decorations
decoration {
  rounding = 8
  blur = yes
  blur_size = 3
  blur_passes = 1
  blur_new_optimizations = on
  blur_ignore_opacity = on
  blur_xray = false
  
  drop_shadow = yes
  shadow_range = 4
  shadow_render_power = 2
  col.shadow = rgba(1a1a1aee)
  
  dim_inactive = yes
  dim_strength = 0.1
  dim_special = 0.15
  
  # Super fast decoration animations
  active_opacity = 1.0
  inactive_opacity = 0.9
  fullscreen_opacity = 1.0
}

# Special effects
misc {
  force_default_wallpaper = 0
  disable_hyprland_logo = yes
  disable_splash_rendering = true
  mouse_move_enables_dpms = true
  key_press_enables_dpms = true
  always_follow_on_dnd = true
  layers_hog_keyboard_focus = true
  animate_manual_resizes = true
  animate_mouse_windowdragging = true
  disable_autoreload = false
  
  # Optimizations for maximum smoothness
  animate_manual_resizes = true
  animate_mouse_windowdragging = true
  animate_splits = true
  animate_cursor = true
  animate_workspace_transitions = true
  
  # Configurations for maximum smoothness
  focus_on_activate = true
  no_direct_scanout = false
  hide_cursor_on_touch = true
  mouse_move_focuses_monitor = true
}

# Touchpad gestures
gestures {
  workspace_swipe = yes
  workspace_swipe_fingers = 3
  workspace_swipe_distance = 300
  workspace_swipe_invert = false
  workspace_swipe_min_speed_to_force = 30
  workspace_swipe_cancel_ratio = 0.5
  workspace_swipe_create_new = true
  
  # Super fluid gestures
  workspace_swipe_forever = true
  workspace_swipe_use_r = true
  workspace_swipe_touch = true
}

# Dwindle layout
dwindle {
  pseudotile = yes
  preserve_split = yes
  special_scale_factor = 0.8
  split_width_multiplier = 1.25
  use_active_for_splits = true
  no_gaps_when_only = false
  default_split_ratio = 1.0
  smart_split = false
  smart_resizing = true
}

# Master layout
master {
  new_is_master = true
  new_on_top = true
  mfact = 0.55
}

# =============================================================================
# üéØ PRIMARY KEYBINDS - SUPER (WINDOWS KEY)
# =============================================================================

# Primary applications
bind = SUPER,Return,exec,~/.config/waybar/scripts/power-menu.sh  # Men√∫ de apagado/reinicio
bind = SUPER,T,exec,kitty --class=float           # Terminal flotante
bind = SUPER,N,exec,kitty -e nvim                 # Neovim in terminal
bind = SUPER,B,exec,brave                       # Browser (Brave)
bind = SUPER,D,exec,wofi --show drun              # Application launcher
bind = SUPER,E,exec,nautilus                      # File manager
bind = SUPER,V,exec,code                          # VS Code
bind = SUPER,X,exec,kitty -e htop                 # Monitor de procesos
bind = SUPER,K,exec,krita                       # Krita (Digital Art)

# Gaming and multimedia
bind = SUPER,G,exec,steam                         # Steam
bind = SUPER,M,exec,spotify                       # Spotify
bind = SUPER,P,exec,obs                           # OBS Studio
bind = SUPER+SHIFT,P,exec,discord                 # Discord
bind = SUPER+SHIFT,G,exec,lutris                  # Lutris

# Development applications
bind = SUPER+SHIFT,T,exec,kitty --class=float      # Terminal flotante
bind = SUPER+SHIFT,V,exec,kitty -e lazygit         # Git GUI
bind = SUPER+SHIFT,N,exec,kitty -e yazi             # File manager TUI
bind = SUPER+CTRL,N,exec,kitty -e btop              # Monitor de sistema
bind = SUPER+SHIFT,X,exec,kitty -e nvim ~/.config/hypr/hyprland.conf  # Editar config

# System
bind = SUPER,Q,killactive,                        # Close active window
bind = SUPER+SHIFT,Q,exit,                        # Exit Hyprland
bind = SUPER,R,exec,hyprctl reload                # Reload configuration
bind = SUPER+SHIFT+CTRL,C,exec,hyprctl dispatch dpms off  # Turn off screen
bind = SUPER,PRINT,exec,grim -g "$(slurp)" ~/Pictures/screenshot.png  # Screenshot
bind = SUPER,L,exec,swaylock                      # Lock screen

# Random wallpaper
bind = SUPER+SHIFT,W,exec,$HOME/.config/dotfiles/scripts/random-wallpaper.sh

# Window navigation (focus)
bind = SUPER,H,movefocus,l                         # Left
bind = SUPER,L,movefocus,r                         # Right
bind = SUPER,K,movefocus,u                         # Up
bind = SUPER,J,movefocus,d                         # Down
bind = SUPER+SHIFT,H,movewindow,l                  # Move window left
bind = SUPER+SHIFT,L,movewindow,r                  # Move window right
bind = SUPER+SHIFT,K,movewindow,u                  # Move window up
bind = SUPER+SHIFT,J,movewindow,d                  # Move window down

# Resize windows (more precise)
bind = SUPER+CTRL,H,resizeactive,-20 0             # Decrease width
bind = SUPER+CTRL,L,resizeactive,20 0              # Increase width
bind = SUPER+CTRL,K,resizeactive,0 -20             # Decrease height
bind = SUPER+CTRL,J,resizeactive,0 20              # Increase height

# Resize with arrows (alternative)
bind = SUPER+CTRL,left,resizeactive,-20 0
bind = SUPER+CTRL,right,resizeactive,20 0
bind = SUPER+CTRL,up,resizeactive,0 -20
bind = SUPER+CTRL,down,resizeactive,0 20

# Layout and state control
bind = SUPER,SPACE,togglefloating,                 # Floating window
bind = SUPER+SHIFT,SPACE,fullscreen,1              # Fullscreen
bind = SUPER,F,fullscreen,0                        # Fullscreen
bind = SUPER+SHIFT,F,fullscreen,2                  # Fullscreen without borders
bind = SUPER,C,centerwindow,                       # Centrar ventana

# Window navigation
bind = SUPER,tab,cyclenext,                        # Next window
bind = SUPER+SHIFT,tab,cyclenext,prev              # Previous window
bind = SUPER+CTRL,tab,cyclenext,                   # Next window (alternative)

# Special window controls
bind = SUPER+CTRL,Q,exec,hyprctl kill               # Force close window
bind = SUPER+SHIFT,C,centerwindow,                 # Center window

# Window management by type
bind = SUPER+SHIFT,T,togglesplit,                  # Toggle split
bind = SUPER+CTRL,T,togglesplit,                   # Toggle split (alternative)
bind = SUPER+SHIFT,R,togglegroup,                  # Group/ungroup windows
bind = SUPER+CTRL,R,togglegroup,                   # Group/ungroup (alternative)

# Window management in group
bind = SUPER+SHIFT,G,changegroupactive,f           # Next in group
bind = SUPER+CTRL,G,changegroupactive,b            # Previous in group
bind = SUPER+SHIFT+CTRL,G,changegroupactive,t      # First in group
bind = SUPER+SHIFT+CTRL+ALT,G,changegroupactive,b  # Last in group

# Special window controls
bind = SUPER+SHIFT,M,togglemirror,                 # Horizontal mirror
bind = SUPER+CTRL,M,togglemirror,                  # Horizontal mirror (alternative)
bind = SUPER+SHIFT+N,toggleopaque,                 # Toggle opacity
bind = SUPER+CTRL+N,toggleopaque,                  # Toggle opacity (alternative)

# Window management by monitor
bind = SUPER+SHIFT+CTRL,H,movewindow,mon:l         # Move to left monitor
bind = SUPER+SHIFT+CTRL,L,movewindow,mon:r         # Move to right monitor
bind = SUPER+SHIFT+CTRL,K,movewindow,mon:u         # Move to upper monitor
bind = SUPER+SHIFT+CTRL,J,movewindow,mon:d         # Move to lower monitor

# Window management by workspace
bind = SUPER+SHIFT+CTRL+ALT,H,movewindow,workspace:l  # Move to previous workspace
bind = SUPER+SHIFT+CTRL+ALT,L,movewindow,workspace:r  # Move to next workspace

# Advanced mouse binds
bind = ,DELETE,movewindow                          # Supr to move window
bindm = SUPER,mouse:BTN_RIGHT,movewindow               # Right click + SUPER to move window
bindm = SUPER,mouse:BTN_MIDDLE,resizewindow            # Middle click + SUPER to resize
bindm = SUPER,mouse:272,resizewindow                   # Left click + SUPER + drag to resize

# Poner ventana seleccionada arriba (master)
bind = SUPER,U,layoutmsg,swapwithmaster
# Poner ventana seleccionada abajo (√∫ltima)
bind = SUPER,I,layoutmsg,swapprev

# =============================================================================
# üìÅ WORKSPACES Y NAVEGACI√ìN
# =============================================================================

# Window navigation between workspaces
bind = SUPER,1,workspace,1
bind = SUPER,2,workspace,2
bind = SUPER,3,workspace,3
bind = SUPER,4,workspace,4
bind = SUPER,5,workspace,5
bind = SUPER,6,workspace,6
bind = SUPER,7,workspace,7
bind = SUPER,8,workspace,8
bind = SUPER,9,workspace,9
bind = SUPER,0,workspace,10

# Move windows to workspaces
bind = SUPER+SHIFT,1,movetoworkspace,1
bind = SUPER+SHIFT,2,movetoworkspace,2
bind = SUPER+SHIFT,3,movetoworkspace,3
bind = SUPER+SHIFT,4,movetoworkspace,4
bind = SUPER+SHIFT,5,movetoworkspace,5
bind = SUPER+SHIFT,6,movetoworkspace,6
bind = SUPER+SHIFT,7,movetoworkspace,7
bind = SUPER+SHIFT,8,movetoworkspace,8
bind = SUPER+SHIFT,9,movetoworkspace,9
bind = SUPER+SHIFT,0,movetoworkspace,10

# Quick navigation between workspaces
bind = SUPER+CTRL,left,workspace,e-1               # Workspace anterior
bind = SUPER+CTRL,right,workspace,e+1              # Workspace siguiente
bind = SUPER+CTRL+SHIFT,left,movetoworkspace,e-1   # Mover ventana a workspace anterior
bind = SUPER+CTRL+SHIFT,right,movetoworkspace,e+1  # Mover ventana a workspace siguiente

# Special workspace
bind = SUPER+SHIFT+CTRL,D,workspace,special        # Special workspace (desktop)
bind = SUPER+SHIFT+CTRL,R,workspace,back_and_forth # Go back to previous workspace

# =============================================================================
# üöÄ ADDITIONAL APPLICATION KEYBINDS
# =============================================================================

# Development applications
bind = DELETE,T,exec,kitty                         # Terminal (alternative)
bind = SUPER+SHIFT,T,exec,kitty --class=float      # Floating terminal

# Multimedia applications
bind = SUPER,M,exec,spotify                        # Spotify
bind = SUPER,P,exec,obs                            # OBS Studio
bind = SUPER,G,exec,steam                          # Steam
bind = SUPER+SHIFT,P,exec,discord                  # Discord
bind = SUPER+SHIFT,G,exec,lutris                   # Lutris

# Audio control
bind = SUPER+SHIFT,A,exec,pavucontrol              # Audio control
bind = SUPER+SHIFT,B,exec,blueman-manager          # Bluetooth
bind = SUPER+SHIFT,N,exec,networkmanager_dmenu     # Network manager

# Productivity applications
bind = SUPER+SHIFT,O,exec,obsidian                 # Obsidian
bind = SUPER+SHIFT,L,exec,libreoffice              # LibreOffice

# System keybinds
bind = ,XF86AudioRaiseVolume,exec,pamixer -i 5
bind = ,XF86AudioLowerVolume,exec,pamixer -d 5
bind = ,XF86AudioMute,exec,pamixer -t
bind = ,XF86MonBrightnessUp,exec,brightnessctl set +5%
bind = ,XF86MonBrightnessDown,exec,brightnessctl set 5%-
bind = ,XF86PowerOff,exec,systemctl poweroff
bind = ,XF86Sleep,exec,systemctl suspend
bind = SUPER+SHIFT+CTRL,S,exec,systemctl suspend
bind = SUPER+SHIFT+CTRL+P,exec,systemctl poweroff
bind = SUPER+SHIFT+CTRL+R,exec,systemctl reboot

# Eww keybinds
bind = SUPER,W,exec,eww open-many main-bar
bind = SUPER+SHIFT,W,exec,eww close-all
bind = SUPER+CTRL,W,exec,eww reload

# Clipboard keybinds
# bind = SUPER,V,exec,copyq show
# bind = SUPER+SHIFT+V,exec,cliphist list | wofi --show dmenu | cliphist decode | wl-copy
# bind = SUPER+CTRL+V,exec,cliphist list | wofi --show dmenu | cliphist decode | wl-copy

# Autostart
exec-once = swww-daemon &
exec-once = waybar &
exec-once = mako &
exec-once = eww daemon &
exec-once = nm-applet &
exec-once = blueman-applet &
# exec-once = copyq &
# exec-once = wl-paste -t text --watch cliphist store &

# Window rules
windowrule = float,^(pavucontrol)$
windowrule = float,^(blueman-manager)$
windowrule = float,^(nm-connection-editor)$
windowrule = float,^(org.gnome.Nautilus)$
windowrule = float,^(thunar)$
windowrule = float,^(file-roller)$
windowrule = float,^(gcolor3)$

# =============================================================================
# üìã WORKSPACE RULES
# =============================================================================
workspace = 1,monitor:DP-1,default:true
workspace = 2,monitor:DP-1
workspace = 3,monitor:DP-1
workspace = 4,monitor:DP-1
workspace = 5,monitor:DP-1
workspace = 6,monitor:DP-2,default:true
workspace = 7,monitor:DP-2
workspace = 8,monitor:DP-2
workspace = 9,monitor:DP-2
workspace = 10,monitor:DP-2

# =============================================================================
# ‚ö° SUPER FAST AND FLUID ANIMATIONS
# =============================================================================

# Animation configurations for maximum smoothness
animations {
  enabled = yes
  bezier = myBezier,0.4,0.02,0.26,1
}

# =============================================================================
# üöÄ PERFORMANCE OPTIMIZATIONS
# =============================================================================

# Configurations for maximum smoothness and performance
env = WLR_NO_HARDWARE_CURSORS,1
env = WLR_RENDERER_ALLOW_SOFTWARE,1
env = WLR_RENDERER,vulkan
env = WLR_USE_LIBINPUT,1
env = XDG_SESSION_TYPE,wayland
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_DESKTOP,Hyprland
env = QT_QPA_PLATFORM,wayland
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1
env = GDK_BACKEND,wayland
env = CLUTTER_BACKEND,wayland
env = SDL_VIDEODRIVER,wayland
env = MOZ_ENABLE_WAYLAND,1
env = _JAVA_AWT_WM_NONREPARENTING,1

# Memory and CPU optimizations
env = WLR_DRM_NO_ATOMIC,1
env = WLR_NO_HARDWARE_CURSORS,1
env = WLR_RENDERER_ALLOW_SOFTWARE,1

# =============================================================================
# üìù KEYBINDS SUMMARY - SUPER (WINDOWS KEY)
# =============================================================================
# 
# üéØ PRIMARY APPLICATIONS:
#   SUPER + Return  -> Terminal (Kitty)
#   SUPER + N       -> Neovim in terminal
#   SUPER + B       -> Browser (Firefox)
#   SUPER + D       -> Application launcher (Wofi)
#   SUPER + E       -> File manager (Nautilus)
#   DELETE + T      -> Terminal (alternative)
#   SUPER + M       -> Spotify
#   SUPER + P       -> OBS Studio
#   SUPER + G       -> Steam
#
# üõ†Ô∏è HERRAMIENTAS DE DESARROLLO:
#   SUPER + SHIFT + T -> Terminal flotante
#   SUPER + SHIFT + V -> Git GUI (LazyGit)
#   SUPER + SHIFT + N -> File manager TUI (Yazi)
#   SUPER + CTRL + N  -> Monitor de sistema (btop)
#   SUPER + SHIFT + X -> Editar configuraci√≥n Hyprland
#
# üéÆ GAMING Y MULTIMEDIA:
#   SUPER + SHIFT + P -> Discord
#   SUPER + SHIFT + G -> Lutris
#
# üñ•Ô∏è ADVANCED WINDOW CONTROL:
#   SUPER + H/J/K/L -> Move focus between windows
#   SUPER + SHIFT + H/J/K/L -> Move windows
#   SUPER + CTRL + H/J/K/L -> Resize windows
#   SUPER + SPACE   -> Floating window
#   SUPER + F       -> Fullscreen
#   SUPER + SHIFT + F -> Fullscreen without borders
#   SUPER + TAB     -> Next window
#   SUPER + SHIFT + TAB -> Previous window
#   SUPER + SHIFT + C -> Center window
#   SUPER + SHIFT + T -> Toggle split
#   SUPER + SHIFT + R -> Group/ungroup windows
#   SUPER + SHIFT + G -> Next in group
#   SUPER + CTRL + G -> Previous in group
#   SUPER + SHIFT + M -> Horizontal mirror
#   SUPER + SHIFT + N -> Toggle opacity
#   SUPER + SHIFT + CTRL + H/J/K/L -> Move to monitor
#   SUPER + SHIFT + CTRL + ALT + H/L -> Move to previous/next workspace
#   DELETE          -> Move window (hold)
#   Mouse Right     -> Move window (right click + drag)
#   Mouse Middle    -> Resize window (middle click + drag)
#
# üé® SYSTEM:
#   SUPER + Q       -> Close active window
#   SUPER + CTRL + Q -> Force close window
#   SUPER + SHIFT + Q -> Exit Hyprland
#   SUPER + R       -> Reload configuration
#   SUPER + SHIFT + CTRL + C -> Turn off screen
#   SUPER + PRINT   -> Screenshot (grim + slurp)
#   SUPER + L       -> Lock screen (swaylock)
#   SUPER + SHIFT + W -> Random wallpaper
#
# üìÅ WORKSPACES:
#   SUPER + 1-5     -> Go to workspace 1-5
#   SUPER + SHIFT + 1-5 -> Move window to workspace 1-5
#
# üéµ MULTIMEDIA:
#   SUPER + SHIFT + A -> Audio control
#   SUPER + SHIFT + B -> Bluetooth
#   SUPER + SHIFT + N -> Network manager
#
# üìö PRODUCTIVITY:
#   SUPER + SHIFT + O -> Obsidian
#   SUPER + SHIFT + L -> LibreOffice
#
# =============================================================================

# Keybinds avanzados y mejoras sugeridas por Copilot

# Mover ventana a monitor espec√≠fico
bind = SUPER+ALT+LEFT,movewindow,mon:l
bind = SUPER+ALT+RIGHT,movewindow,mon:r
bind = SUPER+ALT+UP,movewindow,mon:u
bind = SUPER+ALT+DOWN,movewindow,mon:d

# Mover ventana a workspace anterior/siguiente
bind = SUPER+ALT+H,movewindow,workspace:l
bind = SUPER+ALT+L,movewindow,workspace:r

# Centrar ventana
bind = SUPER+C,centerwindow,

# Maximizar/minimizar/restaurar ventana
bind = SUPER+M,maximizeactive,
bind = SUPER+SHIFT+M,minimizeactive,
bind = SUPER+CTRL+M,restoreactive,

# Mover ventana a esquinas (tiling manual)
bind = SUPER+CTRL+NUMPAD1,movewindow,corner:bottomleft
bind = SUPER+CTRL+NUMPAD2,movewindow,corner:bottom
bind = SUPER+CTRL+NUMPAD3,movewindow,corner:bottomright
bind = SUPER+CTRL+NUMPAD4,movewindow,corner:left
bind = SUPER+CTRL+NUMPAD5,centerwindow,
bind = SUPER+CTRL+NUMPAD6,movewindow,corner:right
bind = SUPER+CTRL+NUMPAD7,movewindow,corner:topleft
bind = SUPER+CTRL+NUMPAD8,movewindow,corner:top
bind = SUPER+CTRL+NUMPAD9,movewindow,corner:topright

# Ajustar tama√±o de ventana (pasos peque√±os)
bind = SUPER+ALT+CTRL+LEFT,resizeactive,-10 0
bind = SUPER+ALT+CTRL+RIGHT,resizeactive,10 0
bind = SUPER+ALT+CTRL+UP,resizeactive,0 -10
bind = SUPER+ALT+CTRL+DOWN,resizeactive,0 10

# Ajustar tama√±o de ventana (pasos grandes)
bind = SUPER+ALT+SHIFT+LEFT,resizeactive,-40 0
bind = SUPER+ALT+SHIFT+RIGHT,resizeactive,40 0
bind = SUPER+ALT+SHIFT+UP,resizeactive,0 -40
bind = SUPER+ALT+SHIFT+DOWN,resizeactive,0 40

# Cambiar layout r√°pidamente
define = layout_dwindle,layoutmsg,dwindle
bind = SUPER+ALT+D,layoutmsg,dwindle
bind = SUPER+ALT+M,layoutmsg,master

# Minimizar todas las ventanas (mostrar escritorio)
bind = SUPER+CTRL+D,exec,hyprctl dispatch workspace special

# Restaurar todas las ventanas
define = restore_all,exec,hyprctl dispatch workspace back_and_forth
bind = SUPER+CTRL+R,restore_all

# Cambiar wallpaper secuencialmente
bind = SUPER+SHIFT+RIGHT,exec,$HOME/.config/scripts/wallpaper-next.sh
bind = SUPER+SHIFT+LEFT,exec,$HOME/.config/scripts/wallpaper-prev.sh