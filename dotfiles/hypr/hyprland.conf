# Configuraci√≥n de Hyprland para Arch Dots
# Optimizada y sin conflictos

# Configuraci√≥n de monitor
monitor = ,preferred,auto,1

# Wallpaper por defecto
exec = swaybg -i /usr/share/backgrounds/archlinux/archlinux-wallpaper.jpg -m fill

# Configuraci√≥n de entrada
input {
  kb_layout = us,es
  kb_variant =
  kb_model =
  kb_options =
  kb_rules =
  
  follow_mouse = 1
  touchpad {
    natural_scroll = yes
    scroll_factor = 0.3
    tap-to-click = yes
    drag_lock = yes
  }
  
  sensitivity = 0
  accel_profile = flat
  
  # Optimizaciones para m√°xima fluidez
  repeat_rate = 50
  repeat_delay = 300
  numlock_by_default = true
  left_handed = false
  scroll_method = 2
  scroll_button = 274
}

# Configuraci√≥n de dispositivos
device {
  name = epic-mouse-v1
  sensitivity = -0.5
}

# Configuraci√≥n de XWayland
xwayland {
  force_zero_scaling = true
}

# Configuraci√≥n general
general {
  gaps_in = 6
  gaps_out = 12
  border_size = 2
  col.active_border = rgba(33ccffff)
  col.inactive_border = rgba(595959aa)
  layout = dwindle
  allow_tearing = false
  
  # Animaciones s√∫per r√°pidas
  animate_manual_resizes = true
  animate_mouse_windowdragging = true
  animate_splits = true
  animate_cursor = true
  animate_workspace_transitions = true
}

# Decoraciones de ventanas
decoration {
  rounding = 8
  blur = yes
  blur_size = 3
  blur_passes = 1
  blur_new_optimizations = on
  blur_ignore_opacity = on
  blur_xray = false
  
  drop_shadow = yes
  shadow_range = 4
  shadow_render_power = 2
  col.shadow = rgba(1a1a1aee)
  
  dim_inactive = yes
  dim_strength = 0.1
  dim_special = 0.15
  
  # Animaciones de decoraci√≥n s√∫per r√°pidas
  active_opacity = 1.0
  inactive_opacity = 0.9
  fullscreen_opacity = 1.0
}

# Efectos especiales
misc {
  force_default_wallpaper = 0
  disable_hyprland_logo = yes
  disable_splash_rendering = true
  mouse_move_enables_dpms = true
  key_press_enables_dpms = true
  always_follow_on_dnd = true
  layers_hog_keyboard_focus = true
  animate_manual_resizes = true
  animate_mouse_windowdragging = true
  disable_autoreload = false
  
  # Optimizaciones de rendimiento
  animate_manual_resizes = true
  animate_mouse_windowdragging = true
  animate_splits = true
  animate_cursor = true
  animate_workspace_transitions = true
  
  # Configuraciones para m√°xima fluidez
  focus_on_activate = true
  no_direct_scanout = false
  hide_cursor_on_touch = true
  mouse_move_focuses_monitor = true
}

# Gestos del touchpad
gestures {
  workspace_swipe = yes
  workspace_swipe_fingers = 3
  workspace_swipe_distance = 300
  workspace_swipe_invert = false
  workspace_swipe_min_speed_to_force = 30
  workspace_swipe_cancel_ratio = 0.5
  workspace_swipe_create_new = true
  
  # Gestos s√∫per fluidos
  workspace_swipe_forever = true
  workspace_swipe_use_r = true
  workspace_swipe_touch = true
}

# Layout dwindle
dwindle {
  pseudotile = yes
  preserve_split = yes
  special_scale_factor = 0.8
  split_width_multiplier = 1.25
  use_active_for_splits = true
  no_gaps_when_only = false
  default_split_ratio = 1.0
  smart_split = false
  smart_resizing = true
}

# Layout master
master {
  new_is_master = true
  new_on_top = true
  mfact = 0.55
}

# =============================================================================
# üéØ KEYBINDS PRINCIPALES - SUPER (WINDOWS KEY)
# =============================================================================

# Aplicaciones principales
bind = SUPER,Return,exec,kitty                    # Terminal
bind = SUPER,N,exec,kitty -e nvim                 # Neovim en terminal
bind = SUPER,B,exec,firefox                       # Browser
bind = SUPER,D,exec,wofi --show drun              # Buscador de aplicaciones
bind = SUPER,E,exec,nautilus                      # File manager

# Sistema
bind = SUPER,Q,killactive,                        # Cerrar ventana activa
bind = SUPER+SHIFT,Q,exit,                        # Salir de Hyprland
bind = SUPER,R,exec,hyprctl reload                # Recargar configuraci√≥n
bind = SUPER+SHIFT+CTRL,C,exec,hyprctl dispatch dpms off  # Apagar pantalla
bind = SUPER,PRINT,exec,grim -g "$(slurp)" ~/Pictures/screenshot.png  # Screenshot
bind = SUPER,L,exec,swaylock                      # Bloquear pantalla

# Wallpaper aleatorio
bind = SUPER+SHIFT,W,exec,$HOME/.config/dotfiles/scripts/random-wallpaper.sh

# Pantalla completa
bind = SUPER,F,fullscreen,0

# =============================================================================
# üñ•Ô∏è CONTROL AVANZADO DE VENTANAS
# =============================================================================

# Navegaci√≥n entre ventanas (focus)
bind = SUPER,H,movefocus,l                         # Izquierda
bind = SUPER,L,movefocus,r                         # Derecha
bind = SUPER,K,movefocus,u                         # Arriba
bind = SUPER,J,movefocus,d                         # Abajo
bind = SUPER+SHIFT,H,movewindow,l                  # Mover ventana izquierda
bind = SUPER+SHIFT,L,movewindow,r                  # Mover ventana derecha
bind = SUPER+SHIFT,K,movewindow,u                  # Mover ventana arriba
bind = SUPER+SHIFT,J,movewindow,d                  # Mover ventana abajo

# Redimensionar ventanas (m√°s preciso)
bind = SUPER+CTRL,H,resizeactive,-20 0             # Reducir ancho
bind = SUPER+CTRL,L,resizeactive,20 0              # Aumentar ancho
bind = SUPER+CTRL,K,resizeactive,0 -20             # Reducir altura
bind = SUPER+CTRL,J,resizeactive,0 20              # Aumentar altura

# Redimensionar con flechas (alternativo)
bind = SUPER+CTRL,left,resizeactive,-20 0
bind = SUPER+CTRL,right,resizeactive,20 0
bind = SUPER+CTRL,up,resizeactive,0 -20
bind = SUPER+CTRL,down,resizeactive,0 20

# Control de layout y estado
bind = SUPER,SPACE,togglefloating,                 # Ventana flotante
bind = SUPER+SHIFT,SPACE,fullscreen,1              # Pantalla completa
bind = SUPER,F,fullscreen,0                        # Pantalla completa (alternativo)
bind = SUPER+SHIFT,F,fullscreen,2                  # Pantalla completa sin bordes

# Navegaci√≥n entre ventanas
bind = SUPER,tab,cyclenext,                        # Siguiente ventana
bind = SUPER+SHIFT,tab,cyclenext,prev              # Ventana anterior
bind = SUPER+CTRL,tab,cyclenext,                   # Siguiente ventana (alternativo)

# Control de ventanas especiales
bind = SUPER+SHIFT,Q,killactive,                   # Cerrar ventana activa
bind = SUPER+CTRL,Q,exec,hyprctl kill               # Forzar cierre de ventana
bind = SUPER+SHIFT,C,centerwindow,                 # Centrar ventana
bind = SUPER+CTRL,C,centerwindow,                  # Centrar ventana (alternativo)

# Gesti√≥n de ventanas por tipo
bind = SUPER+SHIFT,T,togglesplit,                  # Cambiar split
bind = SUPER+CTRL,T,togglesplit,                   # Cambiar split (alternativo)
bind = SUPER+SHIFT,R,togglegroup,                  # Agrupar/desagrupar ventanas
bind = SUPER+CTRL,R,togglegroup,                   # Agrupar/desagrupar (alternativo)

# Control de ventanas en grupo
bind = SUPER+SHIFT,G,changegroupactive,f           # Siguiente en grupo
bind = SUPER+CTRL,G,changegroupactive,b            # Anterior en grupo
bind = SUPER+SHIFT+CTRL,G,changegroupactive,t      # Primera en grupo
bind = SUPER+SHIFT+CTRL+ALT,G,changegroupactive,b  # √öltima en grupo

# Control de ventanas especiales
bind = SUPER+SHIFT,M,togglemirror,                 # Espejo horizontal
bind = SUPER+CTRL,M,togglemirror,                  # Espejo horizontal (alternativo)
bind = SUPER+SHIFT+N,toggleopaque,                 # Toggle opacidad
bind = SUPER+CTRL+N,toggleopaque,                  # Toggle opacidad (alternativo)

# Control de ventanas por monitor
bind = SUPER+SHIFT+CTRL,H,movewindow,mon:l         # Mover a monitor izquierdo
bind = SUPER+SHIFT+CTRL,L,movewindow,mon:r         # Mover a monitor derecho
bind = SUPER+SHIFT+CTRL,K,movewindow,mon:u         # Mover a monitor superior
bind = SUPER+SHIFT+CTRL,J,movewindow,mon:d         # Mover a monitor inferior

# Control de ventanas por workspace
bind = SUPER+SHIFT+CTRL+ALT,H,movewindow,workspace:l  # Mover a workspace anterior
bind = SUPER+SHIFT+CTRL+ALT,L,movewindow,workspace:r  # Mover a workspace siguiente

# Keybinds de mouse avanzados
bind = ,DELETE,movewindow                          # Supr para mover ventana
bindm = ,mouse:BTN_RIGHT,movewindow               # Click derecho para mover ventana
bindm = ,mouse:BTN_MIDDLE,resizewindow            # Click medio para redimensionar
bindm = ,mouse:272,resizewindow                   # Click izquierdo + arrastrar para redimensionar

# Workspaces
bind = SUPER,1,workspace,1
bind = SUPER,2,workspace,2
bind = SUPER,3,workspace,3
bind = SUPER,4,workspace,4
bind = SUPER,5,workspace,5
bind = SUPER,6,workspace,6
bind = SUPER,7,workspace,7
bind = SUPER,8,workspace,8
bind = SUPER,9,workspace,9
bind = SUPER,0,workspace,10

# Mover ventanas a workspaces
bind = SUPER+SHIFT,1,movetoworkspace,1
bind = SUPER+SHIFT,2,movetoworkspace,2
bind = SUPER+SHIFT,3,movetoworkspace,3
bind = SUPER+SHIFT,4,movetoworkspace,4
bind = SUPER+SHIFT,5,movetoworkspace,5
bind = SUPER+SHIFT,6,movetoworkspace,6
bind = SUPER+SHIFT,7,movetoworkspace,7
bind = SUPER+SHIFT,8,movetoworkspace,8
bind = SUPER+SHIFT,9,movetoworkspace,9
bind = SUPER+SHIFT,0,movetoworkspace,10

# =============================================================================
# üöÄ KEYBINDS DE APLICACIONES ADICIONALES
# =============================================================================

# Aplicaciones de desarrollo
bind = DELETE,T,exec,kitty                         # Terminal (alternativo)
bind = SUPER+SHIFT,T,exec,kitty --class=float      # Terminal flotante

# Aplicaciones multimedia
bind = SUPER,M,exec,spotify                        # Spotify
bind = SUPER+P,exec,obs                            # OBS Studio
bind = SUPER+G,exec,steam                          # Steam

# Aplicaciones de sistema
bind = SUPER+SHIFT,A,exec,pavucontrol              # Control de audio
bind = SUPER+SHIFT,B,exec,blueman-manager          # Bluetooth
bind = SUPER+SHIFT,N,exec,networkmanager_dmenu     # Network manager

# Aplicaciones de productividad
bind = SUPER+SHIFT,O,exec,obsidian                 # Obsidian
bind = SUPER+SHIFT,L,exec,libreoffice              # LibreOffice

# Keybinds de sistema
bind = ,XF86AudioRaiseVolume,exec,pamixer -i 5
bind = ,XF86AudioLowerVolume,exec,pamixer -d 5
bind = ,XF86AudioMute,exec,pamixer -t
bind = ,XF86MonBrightnessUp,exec,brightnessctl set +5%
bind = ,XF86MonBrightnessDown,exec,brightnessctl set 5%-
bind = ,XF86PowerOff,exec,systemctl poweroff
bind = ,XF86Sleep,exec,systemctl suspend

# Keybinds de eww
bind = SUPER,W,exec,eww open-many main-bar
bind = SUPER+SHIFT,W,exec,eww close-all

# Keybinds de portapapeles
# bind = SUPER,V,exec,copyq show
# bind = SUPER+SHIFT+V,exec,cliphist list | wofi --show dmenu | cliphist decode | wl-copy
# bind = SUPER+CTRL+V,exec,cliphist list | wofi --show dmenu | cliphist decode | wl-copy

# Autostart
exec-once = swww-daemon &
exec-once = waybar &
exec-once = mako &
exec-once = eww daemon &
exec-once = nm-applet &
exec-once = blueman-applet &
# exec-once = copyq &
# exec-once = wl-paste -t text --watch cliphist store &

# Reglas de ventanas
windowrule = float,^(pavucontrol)$
windowrule = float,^(blueman-manager)$
windowrule = float,^(nm-connection-editor)$
windowrule = float,^(org.gnome.Nautilus)$
windowrule = float,^(thunar)$
windowrule = float,^(file-roller)$
windowrule = float,^(gcolor3)$

# =============================================================================
# üìã REGLAS DE WORKSPACE
# =============================================================================
workspace = 1,monitor:DP-1,default:true
workspace = 2,monitor:DP-1
workspace = 3,monitor:DP-1
workspace = 4,monitor:DP-1
workspace = 5,monitor:DP-1
workspace = 6,monitor:DP-2,default:true
workspace = 7,monitor:DP-2
workspace = 8,monitor:DP-2
workspace = 9,monitor:DP-2
workspace = 10,monitor:DP-2

# =============================================================================
# ‚ö° ANIMACIONES S√öPER R√ÅPIDAS Y FLUIDAS
# =============================================================================

# Configuraciones de animaci√≥n para m√°xima fluidez
animations {
  enabled = yes
  bezier = myBezier,0.4,0.02,0.26,1
}

# =============================================================================
# üöÄ OPTIMIZACIONES DE RENDIMIENTO
# =============================================================================

# Configuraciones para m√°xima fluidez y rendimiento
env = WLR_NO_HARDWARE_CURSORS,1
env = WLR_RENDERER_ALLOW_SOFTWARE,1
env = WLR_RENDERER,vulkan
env = WLR_USE_LIBINPUT,1
env = XDG_SESSION_TYPE,wayland
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_DESKTOP,Hyprland
env = QT_QPA_PLATFORM,wayland
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1
env = GDK_BACKEND,wayland
env = CLUTTER_BACKEND,wayland
env = SDL_VIDEODRIVER,wayland
env = MOZ_ENABLE_WAYLAND,1
env = _JAVA_AWT_WM_NONREPARENTING,1

# Optimizaciones de memoria y CPU
env = WLR_DRM_NO_ATOMIC,1
env = WLR_NO_HARDWARE_CURSORS,1
env = WLR_RENDERER_ALLOW_SOFTWARE,1

# =============================================================================
# üìù RESUMEN DE KEYBINDS - SUPER (WINDOWS KEY)
# =============================================================================
# 
# üéØ APLICACIONES PRINCIPALES:
#   SUPER + Return  -> Terminal (Kitty)
#   SUPER + N       -> Neovim en terminal
#   SUPER + B       -> Browser (Firefox)
#   SUPER + D       -> Buscador de aplicaciones (Wofi)
#   SUPER + E       -> File manager (Nautilus)
#   DELETE + T      -> Terminal (alternativo)
#   SUPER + M       -> Spotify
#   SUPER + P       -> OBS Studio
#   SUPER + G       -> Steam
#
# üñ•Ô∏è CONTROL AVANZADO DE VENTANAS:
#   SUPER + H/J/K/L -> Mover focus entre ventanas
#   SUPER + SHIFT + H/J/K/L -> Mover ventanas
#   SUPER + CTRL + H/J/K/L -> Redimensionar ventanas
#   SUPER + SPACE   -> Ventana flotante
#   SUPER + F       -> Pantalla completa
#   SUPER + SHIFT + F -> Pantalla completa sin bordes
#   SUPER + TAB     -> Siguiente ventana
#   SUPER + SHIFT + TAB -> Ventana anterior
#   SUPER + SHIFT + C -> Centrar ventana
#   SUPER + SHIFT + T -> Cambiar split
#   SUPER + SHIFT + R -> Agrupar/desagrupar ventanas
#   SUPER + SHIFT + G -> Siguiente en grupo
#   SUPER + CTRL + G -> Anterior en grupo
#   SUPER + SHIFT + M -> Espejo horizontal
#   SUPER + SHIFT + N -> Toggle opacidad
#   SUPER + SHIFT + CTRL + H/J/K/L -> Mover a monitor
#   SUPER + SHIFT + CTRL + ALT + H/L -> Mover a workspace anterior/siguiente
#   DELETE          -> Mover ventana (mantener presionado)
#   Mouse Right     -> Mover ventana (click derecho + arrastrar)
#   Mouse Middle    -> Redimensionar ventana (click medio + arrastrar)
#
# üé® SISTEMA:
#   SUPER + Q       -> Cerrar ventana activa
#   SUPER + CTRL + Q -> Forzar cierre de ventana
#   SUPER + SHIFT + Q -> Salir de Hyprland
#   SUPER + R       -> Recargar configuraci√≥n
#   SUPER + SHIFT + CTRL + C -> Apagar pantalla
#   SUPER + PRINT   -> Screenshot (grim + slurp)
#   SUPER + L       -> Bloquear pantalla (swaylock)
#   SUPER + SHIFT + W -> Wallpaper aleatorio
#
# üìÅ WORKSPACES:
#   SUPER + 1-5     -> Ir a workspace 1-5
#   SUPER + SHIFT + 1-5 -> Mover ventana a workspace 1-5
#
# üéµ MULTIMEDIA:
#   SUPER + SHIFT + A -> Control de audio
#   SUPER + SHIFT + B -> Bluetooth
#   SUPER + SHIFT + N -> Network manager
#
# üìö PRODUCTIVIDAD:
#   SUPER + SHIFT + O -> Obsidian
#   SUPER + SHIFT + L -> LibreOffice
#
# =============================================================================

# Keybinds avanzados y mejoras sugeridas por Copilot

# Mover ventana a monitor espec√≠fico
bind = SUPER+ALT+LEFT,movewindow,mon:l
bind = SUPER+ALT+RIGHT,movewindow,mon:r
bind = SUPER+ALT+UP,movewindow,mon:u
bind = SUPER+ALT+DOWN,movewindow,mon:d

# Mover ventana a workspace anterior/siguiente
bind = SUPER+ALT+H,movewindow,workspace:l
bind = SUPER+ALT+L,movewindow,workspace:r

# Centrar ventana
bind = SUPER+C,centerwindow,

# Maximizar/minimizar/restaurar ventana
bind = SUPER+M,maximizeactive,
bind = SUPER+SHIFT+M,minimizeactive,
bind = SUPER+CTRL+M,restoreactive,

# Mover ventana a esquinas (tiling manual)
bind = SUPER+CTRL+NUMPAD1,movewindow,corner:bottomleft
bind = SUPER+CTRL+NUMPAD2,movewindow,corner:bottom
bind = SUPER+CTRL+NUMPAD3,movewindow,corner:bottomright
bind = SUPER+CTRL+NUMPAD4,movewindow,corner:left
bind = SUPER+CTRL+NUMPAD5,centerwindow,
bind = SUPER+CTRL+NUMPAD6,movewindow,corner:right
bind = SUPER+CTRL+NUMPAD7,movewindow,corner:topleft
bind = SUPER+CTRL+NUMPAD8,movewindow,corner:top
bind = SUPER+CTRL+NUMPAD9,movewindow,corner:topright

# Ajustar tama√±o de ventana (pasos peque√±os)
bind = SUPER+ALT+CTRL+LEFT,resizeactive,-10 0
bind = SUPER+ALT+CTRL+RIGHT,resizeactive,10 0
bind = SUPER+ALT+CTRL+UP,resizeactive,0 -10
bind = SUPER+ALT+CTRL+DOWN,resizeactive,0 10

# Ajustar tama√±o de ventana (pasos grandes)
bind = SUPER+ALT+SHIFT+LEFT,resizeactive,-40 0
bind = SUPER+ALT+SHIFT+RIGHT,resizeactive,40 0
bind = SUPER+ALT+SHIFT+UP,resizeactive,0 -40
bind = SUPER+ALT+SHIFT+DOWN,resizeactive,0 40

# Cambiar layout r√°pidamente
define = layout_dwindle,layoutmsg,dwindle
bind = SUPER+ALT+D,layoutmsg,dwindle
bind = SUPER+ALT+M,layoutmsg,master

# Minimizar todas las ventanas (mostrar escritorio)
bind = SUPER+CTRL+D,exec,hyprctl dispatch workspace special

# Restaurar todas las ventanas
define = restore_all,exec,hyprctl dispatch workspace back_and_forth
bind = SUPER+CTRL+R,restore_all